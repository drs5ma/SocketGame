<html>
  <head>

    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
    </style>

    <script>

    </script>

  </head>



  <body>
    <script src="js/three.min.js"></script>

    <script>

      var color;



      var host = location.origin.replace(/^http/, 'ws')
      var ws = new WebSocket(host);
      ws.onmessage = function (event) {
        

        var timestamp = parseInt(JSON.parse(event.data));
        var tone = (timestamp%1000)/(1000.0);
        color = new THREE.Color( tone, tone, tone );


        
      };

      


      // Our Javascript will go here.
      var scene = new THREE.Scene();
      var width =  window.innerWidth;
      var height = window.innerHeight;
      //var camera = new THREE.PerspectiveCamera( 75,/, 0.1, 1000 );
      var camera = new THREE.OrthographicCamera( width / - 2, width / 2, height / 2, height / - 2, 1, 1000 );

      var renderer = new THREE.WebGLRenderer();
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      var geometry = new THREE.BoxGeometry( 50, 50, 50 );
      var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
      var cube = new THREE.Mesh( geometry, material );
      scene.add( cube );

      camera.position.z = 50;

      var render = function () {
        requestAnimationFrame( render );

        cube.rotation.x += 0.001;
        cube.rotation.y += 0.01;

        cube.material.color.set(color);

        renderer.render(scene, camera);
      };

      render();



    </script>


  </body>
</html>
